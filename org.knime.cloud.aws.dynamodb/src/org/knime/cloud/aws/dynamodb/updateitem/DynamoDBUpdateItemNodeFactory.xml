<?xml version="1.0" encoding="UTF-8"?>
<knimeNode icon="./ddbupdateitem.png" type="Other"
    xmlns="http://knime.org/node/v2.8" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://knime.org/node/v2.10 http://knime.org/node/v2.10.xsd">
    <name>DynamoDB Update Item</name>
    <shortDescription>
        Updates items in DynamoDB using update expressions and condition expressions.
    </shortDescription>

    <fullDescription>
        <intro>
            This node allows conditional updates to items in DynamoDB using
            <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html">Update Expressions</a>.
            Whether an item is updated or not depends on the <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html">Condition Expression</a>.
        </intro>
        <option name="Static credentials">
            If checked, credentials can be entered in the node dialog, otherwise the AWS default credentials provider chain is used,
            which looks for credentials in this order:
        <ul>
        <li>
            Environment Variables - AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY, or AWS_ACCESS_KEY and AWS_SECRET_KEY
        </li>
        <li>
            Java System Properties - aws.accessKeyId and aws.secretKey
        </li>
        <li>
            Credential profiles file at the default location (~/.aws/credentials) shared by all AWS SDKs and the AWS CLI
        </li>
        <li>
            Credentials delivered through the Amazon EC2 container service
            if AWS_CONTAINER_CREDENTIALS_RELATIVE_URI" environment variable is set
            and security manager has permission to access the variable,
        </li>
        <li>
            Instance profile credentials delivered through the Amazon EC2 metadata service
        </li>
        </ul>
        </option>
        <option name="Access Key">The access key for access to the AWS infrastructure.</option>
        <option name="Secret Key">The secret key for access to the AWS infrastructure.</option>
        <option name="Region">The region the table is in.</option>
        <option name="Table Name">The table to access.</option>
        <option name="Custom Endpoint" optional="true">A custom endpoint if the default AWS endpoint should not be used, e.g. for DynamoDB Local.</option>
        <option name="Hash Key">The column holding the hash keys of the items to update.</option>
        <option name="Range Key" optional="true">The column holding the range keys of the items to update.</option>
        <option name="Condition Expression" optional="true">An expression specifying which items to update.
            See the <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html">
            AWS Documentation</a> for further information.</option>
        <option name="Update Expression">
            An expression specifying which attributes to update in what way. See
            <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html">AWS Documentation</a> for further information.</option>
        <option name="Return Values">Which values to return in the output table. Choosing any other value than None may result in consumption of additional read capacity units.</option>
        <option name="Name Mapping">Mapping from placeholder to attribute name for the condition and update expressions. Placeholders for attribute names must start with a hash (#).</option>
        <option name="Value Mapping">Mapping from placeholder to value for the condition and update expressions. Value placeholders must start with a colon (:). If the type is list, set, or map,
        the value must be given as JSON as specified in the <a href="https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_AttributeValue.html">AWS Documentation</a>.
        If COLUMN is selected as type, the value is retrieved from a table column and inserted into the expression. 
        </option>
        <option name="Publish consumed capacity units as flow variable">If checked, the total number of consumed read and write capacity units is published as flow variable.</option>
    </fullDescription>

    <ports>
        <inPort index="0" name="Amazon Credentials">Credentials for an AWS account</inPort>
        <inPort index="1" name="Data">Data to update</inPort>
        <outPort index="0" name="Amazon Credentials">Credentials for an AWS account</outPort>
        <outPort index="1" name="Update results">Updated items as defined by the return value setting</outPort>
    </ports>
</knimeNode>

